(function(){"use strict";var e={7355:function(e,t,i){var n=i(6848),s=function(){var e=this,t=e._self._c;return t("app-scheme",[t("game-page")],1)},o=[],a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"app__layout"},[t("main",{staticClass:"main"},[t("content-container",[t("div",{staticClass:"main__content"},[e._t("default")],2)])],1)])},l=[],r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content-container"},[t("div",{staticClass:"content-container__content"},[e._t("default")],2)])},c=[],d=(0,n.pM)({name:"content-container"}),u=d,p=i(1656),f=(0,p.A)(u,r,c,!1,null,"15fb3e92",null),h=f.exports,m=(0,n.pM)({name:"app-scheme",components:{ContentContainer:h}}),y=m,v=(0,p.A)(y,a,l,!1,null,"0e810aae",null),g=v.exports,b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"game"},[t("game-board",{ref:"board",attrs:{level:e.level,settings:e.settings,info:e.info,"set-win":e.setWin,"set-lose":e.setLose,"set-played":e.setPlayed}}),t("div",{staticClass:"stats"},[t("button",{on:{click:()=>{e.play(e.callback,e.level,e.settings.difficulty.interval,e.settings.timeout)()}}},[e._v("Играть")]),e.info.lose?t("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("game-options",{attrs:{difficult:e.settings.difficulty,"set-difficult":e.setDifficult,mode:e.settings.mode,"set-mode":e.setMode}}),t("div",[e._v("Счет: "+e._s(e.stats.count))])],1)],1)},_=[],k=(i(4114),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("game-plates-board",{attrs:{interval:e.settings.difficulty.interval,mode:e.settings.mode,info:e.info,playbacked:e.info.playbacked},on:{refs:e.initRefs,sequence:e.updateSequence}})],1)}),q=[],C=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"board"},[t("game-plate",{ref:"blue",staticClass:"board__plate",attrs:{name:"blue",color:"#1d75cd",position:{top:!0,left:!0},audio:e.audio.do,interval:e.interval,mode:e.mode,played:e.info.played,playbacked:e.playbacked,"add-plate":e.addToSequence}}),t("game-plate",{ref:"red",staticClass:"board__plate",attrs:{name:"red",color:"#8e0b0b",position:{top:!0,right:!0},audio:e.audio.re,interval:e.interval,mode:e.mode,played:e.info.played,playbacked:e.playbacked,"add-plate":e.addToSequence}}),t("game-plate",{ref:"yellow",staticClass:"board__plate",attrs:{name:"yellow",color:"#dfdf11",position:{bottom:!0,left:!0},audio:e.audio.mi,interval:e.interval,mode:e.mode,played:e.info.played,playbacked:e.playbacked,"add-plate":e.addToSequence}}),t("game-plate",{ref:"green",staticClass:"board__plate",attrs:{name:"green",color:"#30a40a",position:{bottom:!0,right:!0},audio:e.audio.fa,interval:e.interval,mode:e.mode,played:e.info.played,playbacked:e.playbacked,"add-plate":e.addToSequence}})],1)},w=[],P=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"plate",class:{highlighted:e.highlighted,clicked:e.clicked,top:e.position?.top,bottom:e.position?.bottom,left:e.position?.left,right:e.position?.right},style:{backgroundColor:e.color},on:{click:e.onClick,keydown:e.onClick,keyup:e.onClick}})},x=[],O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("fieldset",[t("legend",[e._v("Выберите режим:")]),t("form",{staticClass:"options",on:{change:e.onChange}},e._l(e.options,(function(i){return t("label",{key:i.name,staticClass:"option",attrs:{for:i.name}},[t("input",{attrs:{type:"radio",id:i.name,name:"options"},domProps:{value:i.value,checked:i.name===e.mode.name}}),t("span",[e._v(e._s(i.name))])])})),0)])},A=[];const S={name:"Музыка и подсветка",value:"all"},M={name:"Музыка",value:"music"},j={name:"Подсветка",value:"highlight"};var T=(0,n.pM)({name:"game-options-mode",data(){return{options:{all:S,music:M,highlight:j}}},props:{mode:{type:Object,required:!0},setMode:{type:Function}},methods:{onChange(e){const t=e.target.value;this.setMode&&this.setMode(this.options?.[t])}}}),F=T,$=(0,p.A)(F,O,A,!1,null,"efb4a7ea",null),G=$.exports;const D=(0,n.pM)({name:"game-plate",data(){return{highlighted:!1,clicked:!1,clickTime:100}},props:{name:{type:String,required:!0},audio:{type:Audio},color:{type:String},interval:{type:Number},played:{type:Boolean},mode:{type:Object,required:!0},position:{type:Object},playbacked:{type:Boolean,required:!0},addPlate:{type:Function},setAudioSpeed:{type:Function}},methods:{onClick(){!this.playbacked&&this.played&&(this.highlight(this.clickTime),this.playSong(),this.click(this.clickTime),this.addPlate&&this.addPlate(this.name))},call(){this.highlight(),this.playSong()},highlight(e){this.mode.value!==S.value&&this.mode.value!==j.value||(this.highlighted=!0,setTimeout((()=>{this.highlighted=!1}),e||this.interval))},click(e){this.clicked=!0,setTimeout((()=>{this.clicked=!1}),e)},playSong(){this.mode.value!==S.value&&this.mode.value!==M.value||this.audio?.play()}}});var L=D,R=L,W=(0,p.A)(R,P,x,!1,null,"7dc692eb",null),B=W.exports,N=i.p+"media/do.45f47533.mp3",E=i.p+"media/re.c135b57d.mp3",z=i.p+"media/mi.90db5d73.mp3",H=i.p+"media/fa.1f15140b.mp3";const I=new Audio(N),J=new Audio(E),K=new Audio(z),Q=new Audio(H);var U=(0,n.pM)({name:"game-plates-board",components:{GamePlate:B},props:{interval:{type:Number},mode:{type:Object,required:!0},info:{type:Object,required:!0},playbacked:{type:Boolean,required:!0}},data(){return{refs:{},sequence:[],audio:{do:I,re:J,mi:K,fa:Q}}},watch:{interval(e){this.setAudioSpeed(e)},info:{handler(e){(e.lose||e.win)&&this.cleanSequence()},deep:!0}},methods:{addToSequence(e){this.playbacked||this.info.win||this.info.lose||(this.sequence.push(e),this.$emit("sequence",this.sequence))},cleanSequence(){this.sequence=[],this.$emit("sequence",[])},setAudioSpeed(e){const t=1e3/Math.min(e,1e3),i=Object.keys(this.audio);for(let n=0;n<i.length;n+=1){const e=i[n];this.audio[e].playbackRate=t}}},mounted(){const e={blue:this.$refs.blue,red:this.$refs.red,yellow:this.$refs.yellow,green:this.$refs.green};this.refs=e,this.$emit("refs",e)}}),V=U,X=(0,p.A)(V,C,w,!1,null,"0db93720",null),Y=X.exports;const Z=(0,n.pM)({name:"game-board",components:{GamePlatesBoard:Y},props:{settings:{type:Object,required:!0},info:{type:Object,required:!0},level:{type:[],required:!0},setWin:{type:Function,required:!0},setLose:{type:Function,required:!0},setPlayed:{type:Function,required:!0}},data(){return{refs:{},sequence:[]}},watch:{isLose(e){this.setLose(e)},isWin(e){this.setWin(e)}},computed:{isLose(){return this.info.lose?this.info.lose:!this.compareSequences(this.sequence)},isWin(){return this.info.win?this.info.win:this.compareSequences(this.sequence)&&this.sequence.length===this.level.length}},methods:{callPlate(e){this.refs?.[e]?.call()},initRefs(e){this.refs=e,this.$emit("refs",e)},updateSequence(e){this.sequence=e},compareSequences(e){const t=[...this.level].splice(0,e.length);return e.toString()===t.toString()}}});var ee=Z,te=ee,ie=(0,p.A)(te,k,q,!1,null,"517ed683",null),ne=ie.exports,se=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("fieldset",[t("legend",[e._v("Выберите сложность:")]),t("form",{staticClass:"options",on:{change:e.onChange}},e._l(e.options,(function(i){return t("label",{key:i.name,staticClass:"option",attrs:{for:i.name}},[t("input",{attrs:{type:"radio",id:i.name,name:"options"},domProps:{value:i.value,checked:i.name===e.difficult.name}}),t("span",[e._v(e._s(i.name))])])})),0)])},oe=[];const ae={name:"Легкий",value:"easy",interval:1500},le={name:"Средний",value:"medium",interval:1e3},re={name:"Сложный",value:"difficult",interval:400};var ce=(0,n.pM)({name:"game-options-difficult",data(){return{options:{easy:ae,medium:le,difficult:re}}},props:{difficult:{type:Object,required:!0},setDifficult:{type:Function}},methods:{onChange(e){const t=e.target.value;this.setDifficult&&this.setDifficult(this.options?.[t])}}}),de=ce,ue=(0,p.A)(de,se,oe,!1,null,"c0f55c80",null),pe=ue.exports,fe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"options"},[t("game-options-difficult",{attrs:{difficult:e.difficult,"set-difficult":e.setDifficult}}),t("game-options-mode",{attrs:{mode:e.mode,"set-mode":e.setMode}})],1)},he=[],me=(0,n.pM)({name:"game-options",components:{GameOptionsMode:G,GameOptionsDifficult:pe},props:{difficult:{type:Object,required:!0},setDifficult:{type:Function},mode:{type:Object,required:!0},setMode:{type:Function}}}),ye=me,ve=(0,p.A)(ye,fe,he,!1,null,"0d6b769b",null),ge=ve.exports,be=(0,n.pM)({name:"game-page",components:{GameOptions:ge,GameBoard:ne},data(){return{settings:{difficulty:ae,mode:S,timeout:200},level:["blue"],info:{played:!1,win:!1,lose:!1,playbacked:!1},stats:{count:0},error:"Вы проиграли"}},watch:{info:{handler(e){e.win&&setTimeout((()=>{this.play(this.callback,this.level,this.settings.difficulty.interval,this.settings.timeout)()}),1e3)},deep:!0}},methods:{play(e,t,i=1e3,n=1e3){return()=>{this.setLose(!1),this.setWin(!1),this.setPlayed(!0),this.info.playbacked=!0,setTimeout((()=>{const n=this.makeGenerator(t);this.call(n,e,i)}),n)}},makeGenerator(e){function*t(){for(let t=0;t<e.length;t+=1)t!==e.length-1&&(yield e[t]);return e[e.length-1]}return t()},call(e,t,i){const n=e.next();t(n.value),setTimeout((()=>{n.done||this.call(e,t,i),n.done&&(this.info.playbacked=!1)}),i)},callback(e){const t=this.$refs.board;t?.callPlate(e)},setDifficult(e){this.settings.difficulty=e},setMode(e){this.settings.mode=e},setWin(e){this.info.win=e,e&&(this.setPlayed(!1),this.stats.count+=1,this.level.push(this.getRandomPlate()))},setLose(e){this.info.lose=e,e&&(this.setPlayed(!1),this.stats.count=0,this.level=["blue"])},setPlayed(e){this.info.played=e},getRandomPlate(e=4){const t=this.getRandomNumber(1,e);return["blue","red","yellow","green"][t]},getRandomNumber(e,t){return Math.round(Math.random()*(t-e)+e)}}}),_e=be,ke=(0,p.A)(_e,b,_,!1,null,"51619b94",null),qe=ke.exports,Ce={name:"app",components:{GamePage:qe,AppScheme:g}},we=Ce,Pe=(0,p.A)(we,s,o,!1,null,null,null),xe=Pe.exports,Oe=[h];n.Ay.config.productionTip=!1,n.Ay.config.devtools=!0;const Ae=new n.Ay({render:e=>e(xe)});Oe.forEach((e=>{n.Ay.component(e.name,e)})),Ae.$mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,o){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],o=e[d][2];for(var l=!0,r=0;r<n.length;r++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[r])}))?n.splice(r--,1):(l=!1,o<a&&(a=o));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/vue-test-task-for-medods-game/"}(),function(){var e={57:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,a=n[0],l=n[1],r=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(r)var d=r(i)}for(t&&t(n);c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self["webpackChunkvue_test_task_for_medods_game"]=self["webpackChunkvue_test_task_for_medods_game"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(7355)}));n=i.O(n)})();
//# sourceMappingURL=index.18ff4fa2.js.map